@import "tailwindcss";

:root {
  --color-primary: #1A43AA;
  --color-primary-dark: #142F7A;
  --color-primary-light: #2E5BC9;
  --color-accent: #C62F2F;
  --color-accent-dark: #A52525;
  --color-accent-light: #E04545;
  --color-dark: #1e293b;
  --color-gray: #374151;
  --color-light: #F0F5FA;
  --color-white: #FFFFFF;
  --color-link: #046bd2;
  --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
  --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
  --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
  --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
}

@theme inline {
  --color-primary: #1A43AA;
  --color-primary-dark: #142F7A;
  --color-primary-light: #2E5BC9;
  --color-accent: #C62F2F;
  --color-accent-dark: #A52525;
  --color-accent-light: #E04545;
  --color-dark: #1e293b;
  --color-gray: #374151;
  --color-light: #F0F5FA;
  --color-link: #046bd2;
  --font-sans: 'Inter', system-ui, -apple-system, sans-serif;
}

/* Smooth scroll only if user hasn't set reduced motion preference */
@media (prefers-reduced-motion: no-preference) {
  html { scroll-behavior: smooth; }
}

body {
  font-family: var(--font-sans);
  color: var(--color-dark);
  background-color: var(--color-white);
  line-height: 1.6;
  -webkit-font-smoothing: antialiased;
  /* Remove default tap highlight on iOS/Android */
  -webkit-tap-highlight-color: transparent;
  /* Safe area padding for notched devices */
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
}

h1, h2, h3, h4, h5, h6 { font-weight: 700; line-height: 1.2; }

a { text-decoration: none; transition: color 0.2s; }

/* Default link colors - only for content areas, not buttons/nav */
main a:not(.btn):not([class*="bg-"]):not([class*="text-white"]) { color: var(--color-link); }
main a:not(.btn):not([class*="bg-"]):not([class*="text-white"]):hover { color: var(--color-primary); }

a:focus-visible, button:focus-visible, input:focus-visible, textarea:focus-visible {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
}

.btn { display: inline-flex; align-items: center; justify-content: center; gap: 0.5rem; padding: 0.875rem 1.75rem; font-weight: 600; font-size: 1rem; border-radius: 0.5rem; transition: all 0.2s; cursor: pointer; border: none; }
.btn-primary { background-color: var(--color-accent); color: white; }
.btn-primary:hover { background-color: var(--color-accent-dark); transform: translateY(-1px); box-shadow: var(--shadow-lg); }
.btn-secondary { background-color: var(--color-primary); color: white; }
.btn-secondary:hover { background-color: var(--color-primary-dark); transform: translateY(-1px); }
.btn-outline { background: transparent; color: var(--color-primary); border: 2px solid var(--color-primary); }
.btn-outline:hover { background: var(--color-primary); color: white; }

.container { width: 100%; max-width: 1280px; margin: 0 auto; padding: 0 1rem; }
@media (min-width: 640px) { .container { padding: 0 1.5rem; } }

.section { padding: 4rem 0; }
@media (min-width: 768px) { .section { padding: 6rem 0; } }

.card { background: white; border-radius: 1rem; box-shadow: var(--shadow-md); padding: 1.5rem; transition: all 0.3s; }
.card:hover { box-shadow: var(--shadow-xl); transform: translateY(-4px); }

.badge { display: inline-flex; align-items: center; gap: 0.25rem; padding: 0.25rem 0.75rem; font-size: 0.875rem; font-weight: 500; border-radius: 9999px; background: var(--color-light); color: var(--color-primary); }
.stars { display: inline-flex; gap: 0.125rem; color: #fbbf24; }

.phone-link { font-weight: 700; font-size: 1.25rem; color: var(--color-primary); white-space: nowrap; }
.phone-link:hover { color: var(--color-accent); }

.bg-gradient-primary { background: linear-gradient(135deg, var(--color-primary), var(--color-primary-dark)); }
.text-gradient { background: linear-gradient(135deg, var(--color-primary), var(--color-accent)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }

@keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
.animate-fade-in { animation: fadeIn 0.6s ease-out forwards; }

@keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
.animate-fade-in-up { opacity: 0; animation: fadeInUp 0.5s ease-out forwards; }

@keyframes gradientShift { 0% { background-position: 0% center; } 100% { background-position: 200% center; } }
.animate-gradient-shift { animation: gradientShift 6s linear infinite; }

/* Mobile performance: Faster animations and disable expensive effects */
@media (max-width: 767px) {
  /* CRITICAL: Disable all non-essential animations for faster FCP/Speed Index */
  .animate-fade-in { animation: none !important; opacity: 1 !important; transform: none !important; }
  .animate-fade-in-up { animation: none !important; opacity: 1 !important; transform: none !important; }
  .animate-ping { animation: none !important; }
  .animate-gradient-shift { animation: none !important; }

  /* CRITICAL: Disable backdrop-blur on mobile - major performance killer */
  .backdrop-blur-sm, .backdrop-blur-md, .backdrop-blur { backdrop-filter: none !important; -webkit-backdrop-filter: none !important; }

  /* Disable hover transforms on mobile */
  .card:hover { transform: none; box-shadow: var(--shadow-md); }
  .btn-primary:hover, .btn-secondary:hover { transform: none; }

  /* Improve scrolling performance */
  * { -webkit-overflow-scrolling: touch; }

  /* Ensure minimum tap targets (44px) for accessibility */
  .btn, button, a { min-height: 44px; }

  /* Reduce section padding on mobile */
  .section { padding: 3rem 0; }

  /* Smaller headings on mobile */
  h1 { font-size: 1.875rem !important; }
  h2 { font-size: 1.5rem !important; }

  /* Reduce card padding on mobile */
  .card { padding: 1rem; }

  /* Optimize images on mobile */
  img { content-visibility: auto; }

  /* Disable mix-blend-mode for better performance */
  .mix-blend-difference { mix-blend-mode: normal !important; }
}

/* Small mobile (< 480px) */
@media (max-width: 479px) {
  .container { padding: 0 0.75rem; }
  .section { padding: 2.5rem 0; }
  h1 { font-size: 1.5rem !important; line-height: 1.3; }
  h2 { font-size: 1.25rem !important; }
  .btn { padding: 0.75rem 1.25rem; font-size: 0.875rem; }
  .phone-link { font-size: 1rem; }
}

/* Touch device optimizations */
@media (hover: none) and (pointer: coarse) {
  /* Larger tap targets */
  .btn { min-height: 48px; padding: 0.875rem 1.5rem; }

  /* Remove hover effects that don't work on touch */
  .card:hover { box-shadow: var(--shadow-md); transform: none; }
  a:hover { color: inherit; }

  /* Faster transitions for better perceived performance */
  * { transition-duration: 0.15s !important; }
}

.sticky-cta {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: white;
  padding: 1rem;
  padding-bottom: max(1rem, env(safe-area-inset-bottom));
  box-shadow: 0 -4px 6px -1px rgb(0 0 0 / 0.1);
  z-index: 40;
  display: flex;
  gap: 0.5rem;
}
@media (min-width: 768px) { .sticky-cta { display: none; } }

/* Add bottom padding to main content on mobile to prevent content from being hidden behind sticky CTA */
@media (max-width: 767px) {
  main { padding-bottom: 5rem; }
}

.prose { max-width: 65ch; color: var(--color-dark); }
.prose h2 { margin-top: 2rem; margin-bottom: 1rem; }
.prose p { margin-bottom: 1.25rem; }
.prose ul, .prose ol { margin-bottom: 1.25rem; padding-left: 1.5rem; }
.prose a { color: var(--color-link); text-decoration: underline; }

/* Hide default cursor on desktop for custom cursor */
@media (hover: hover) and (pointer: fine) {
  body, a, button, [role="button"], input, select, textarea, [data-hover="true"] {
    cursor: none !important;
  }
}

/* Accessibility: Respect user's motion preferences */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  .animate-fade-in,
  .animate-fade-in-up,
  .animate-gradient-shift,
  .animate-pulse {
    animation: none !important;
    opacity: 1 !important;
    transform: none !important;
  }
}

/* Accessibility: Ensure sufficient color contrast for links */
a:focus,
button:focus,
[role="button"]:focus {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
}

/* ============================================
   CLS (Cumulative Layout Shift) Prevention
   ============================================ */

/* Reserve space for images to prevent layout shift */
img, video {
  max-width: 100%;
  height: auto;
}

/* Reserve space for embeds and iframes */
iframe {
  max-width: 100%;
}

/* Prevent font swap layout shift */
.font-loading * {
  visibility: hidden;
}

/* Reserve height for sticky header - prevents CLS when header becomes sticky */
header {
  contain: layout;
}

/* Prevent CLS from lazy-loaded content */
[data-lazy] {
  min-height: 1px;
}

/* ============================================
   Additional Accessibility Improvements
   ============================================ */

/* High contrast mode support */
@media (prefers-contrast: high) {
  :root {
    --color-primary: #0000CC;
    --color-accent: #CC0000;
    --color-gray: #333333;
    --color-link: #0000EE;
  }

  .btn, button {
    border: 2px solid currentColor;
  }

  a:focus, button:focus {
    outline-width: 3px;
  }
}

/* Ensure minimum touch targets for all interactive elements */
@media (pointer: coarse) {
  a, button, input, select, textarea, [role="button"] {
    min-height: 44px;
    min-width: 44px;
  }
}

/* Screen reader only content - enhanced */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

/* Make sr-only visible when focused (for skip links) */
.sr-only:focus, .sr-only:focus-within {
  position: static;
  width: auto;
  height: auto;
  padding: inherit;
  margin: inherit;
  overflow: visible;
  clip: auto;
  white-space: normal;
}

/* Visible focus indicator for keyboard navigation */
:focus-visible {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
}

/* Remove focus outline for mouse users */
:focus:not(:focus-visible) {
  outline: none;
}

/* Ensure links are distinguishable from surrounding text */
main a:not(.btn):not([class*="bg-"]) {
  text-decoration: underline;
  text-decoration-thickness: 1px;
  text-underline-offset: 2px;
}

main a:not(.btn):not([class*="bg-"]):hover {
  text-decoration-thickness: 2px;
}

/* ============================================
   Performance Optimizations
   ============================================ */

/* Optimize paint performance for fixed/sticky elements */
.sticky, [class*="sticky"], .fixed, [class*="fixed"] {
  will-change: transform;
  backface-visibility: hidden;
}

/* Optimize scrolling performance */
.overflow-auto, .overflow-scroll, .overflow-y-auto, .overflow-x-auto {
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
}

/* Content visibility for below-the-fold content */
.lazy-section {
  content-visibility: auto;
  contain-intrinsic-size: auto 500px;
}

/* ============================================
   Mobile Speed Index Optimizations
   ============================================ */

/* Hide non-critical elements on initial mobile load */
@media (max-width: 767px) {
  /* Apply content-visibility to all sections except first */
  section:not(:first-of-type) {
    content-visibility: auto;
    contain-intrinsic-size: auto 400px;
  }

  /* Reduce complexity of gradients on mobile */
  .bg-gradient-primary,
  .bg-gradient-to-br {
    background: var(--color-primary) !important;
  }

  /* Simplify shadows on mobile */
  .shadow-lg, .shadow-xl, .shadow-2xl {
    box-shadow: var(--shadow-md) !important;
  }

  /* Reduce transition complexity */
  .transition-all {
    transition: opacity 0.15s ease, transform 0.15s ease !important;
  }

  /* Hide decorative SVGs on mobile to reduce paint time */
  svg[aria-hidden="true"]:not(button svg):not(a svg) {
    contain: strict;
  }
}

/* Ultra-aggressive mobile optimization for slow connections */
@media (max-width: 767px) and (prefers-reduced-data: reduce) {
  img:not([loading="eager"]) {
    display: none;
  }
}
